function ISODateString(e){function t(e){return 10>e?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"}function adjustDate(e,t){return MM={Jan:"January",Feb:"February",Mar:"March",Apr:"April",May:"May",Jun:"June",Jul:"July",Aug:"August",Sep:"September",Oct:"October",Nov:"November",Dec:"December"},DD={Sun:"Sunday",Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday"},console.log(e),proper_date=String(new Date(e)).split(" "),console.log("processing: "+proper_date),correct_formatting=DD[proper_date[0]]+" "+MM[proper_date[1]]+" "+proper_date[2]+", "+proper_date[3]+" - ",t&&(clock_time=proper_date[4].substring(0,proper_date[4].length-3),"00"==clock_time.substring(0,2)?clock_time="12"+clock_time.substring(2,clock_time.length)+" AM":"0"==clock_time.substring(0,1)?clock_time=clock_time.substring(1,clock_time.length)+" AM":Number(clock_time.substring(0,2))<12?clock_time+=" AM":12==Number(clock_time.substring(0,2))?clock_time+=" PM":Number(clock_time.substring(0,2))>12&&(new_number=String(Number(clock_time.substring(0,2))-12),clock_time=new_number+clock_time.substring(2,clock_time.length)+" PM"),correct_formatting+=clock_time),correct_formatting}!function(e){e.grabCalendar=function(t){var r,a=encodeURI("https://www.googleapis.com/calendar/v3/calendars/"+calendarid+"/events?singleEvents=true&orderBy=startTime&key="+mykey);if("undefined"!=typeof t&&(t.hasOwnProperty("maxEvents")&&t.maxEvents<2501&&(a=a+"&maxResults="+t.maxEvents),t.hasOwnProperty("upcoming")&&t.upcoming)){var n=new Date;a=a+"&timeMin="+ISODateString(n)}return e.ajax({type:"GET",url:a,dataType:"json",async:!1,success:function(e){var a={};if("undefined"==typeof t)return void(r=e);if(t.hasOwnProperty("clean_date")&&t.clean_date)for(var n=0;n<e.items.length;n++)e.items[n].start.dateTime?(e.items[n].end.dateTime=adjustDate(e.items[n].end.dateTime,!0),e.items[n].start.dateTime=adjustDate(e.items[n].start.dateTime,!0)):e.items[n].start.date&&(e.items[n].end.date=adjustDate(e.items[n].end.date,!1),e.items[n].start.date=adjustDate(e.items[n].start.date,!1));if(t.hasOwnProperty("metadata")){for(var n=0;n<t.metadata.length;n++)a[t.metadata[n]]=!0;for(var n=0;n<e.items.length;n++)if("undefined"!=typeof e.items[n].description)for(var i=e.items[n].description.split("\n"),s=0;s<i.length;s++){var o=i[s].split(": ");o[0]in a&&(e.items[n][o[0]]=o[1])}}if("undefined"!=typeof t&&!t.hasOwnProperty("type")||"full"==t.type)r=e;else if("events"===t.type){r=[];for(var n=0;n<e.items.length;n++){var c={};if(c.start=e.items[n].start.dateTime,c.end=e.items[n].end.dateTime,c.summary=e.items[n].summary,"undefined"!=typeof e.items[n].description&&(c.description=e.items[n].description),"undefined"!=typeof e.items[n].location&&(c.location=e.items[n].location),t.hasOwnProperty("metadata"))for(var m in a)c[m]=e.items[n][m];r.push(c)}}else"detailedEvents"===t.type?r=e.items:console.log("The request of type: "+type+" wasn't valid. Please check for possible syntax errors.")},error:function(e){console.log("The Google Calender API failed to connect.")}}),r}}(jQuery);