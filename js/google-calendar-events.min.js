function ISODateString(e){function t(e){return 10>e?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"}function adjustDate(e,t){MM={Jan:"January",Feb:"February",Mar:"March",Apr:"April",May:"May",Jun:"June",Jul:"July",Aug:"August",Sep:"September",Oct:"October",Nov:"November",Dec:"December"},DD={Sun:"Sunday",Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday"};var n=String(new Date(e)).split(" "),a=DD[n[0]]+" "+MM[n[1]]+" "+n[2]+", "+n[3]+" - ";if(t){var r=n[4].substring(0,n[4].length-3);"00"==r.substring(0,2)?r="12"+r.substring(2,r.length)+" AM":"0"==r.substring(0,1)?r=r.substring(1,r.length)+" AM":Number(r.substring(0,2))<12?r+=" AM":12==Number(r.substring(0,2))?r+=" PM":Number(r.substring(0,2))>12&&(new_number=String(Number(r.substring(0,2))-12),r=new_number+r.substring(2,r.length)+" PM"),a+=r}return a}!function(e){e.grabCalendar=function(t){var n,a=encodeURI("https://www.googleapis.com/calendar/v3/calendars/"+calendarid+"/events?singleEvents=true&orderBy=startTime&key="+mykey);if("undefined"!=typeof t&&(t.hasOwnProperty("maxEvents")&&t.maxEvents<2501&&(a=a+"&maxResults="+t.maxEvents),t.hasOwnProperty("upcoming")&&t.upcoming)){var r=new Date;a=a+"&timeMin="+ISODateString(r)}return e.ajax({type:"GET",url:a,dataType:"json",async:!1,success:function(e){var a={};if("undefined"==typeof t)return void(n=e);if(t.hasOwnProperty("clean_date")&&t.clean_date)for(var r=0;r<e.items.length;r++)e.items[r].start.dateTime?(e.items[r].end.dateTime=adjustDate(e.items[r].end.dateTime,!0),e.items[r].start.dateTime=adjustDate(e.items[r].start.dateTime,!0)):e.items[r].start.date&&(e.items[r].end.date=adjustDate(e.items[r].end.date,!1),e.items[r].start.date=adjustDate(e.items[r].start.date,!1));if(t.hasOwnProperty("metadata")){for(var r=0;r<t.metadata.length;r++)a[t.metadata[r]]=!0;for(var r=0;r<e.items.length;r++)if("undefined"!=typeof e.items[r].description)for(var s=e.items[r].description.split("\n"),i=0;i<s.length;i++){var d=s[i].split(": ");d[0]in a&&(e.items[r][d[0]]=d[1])}}if("undefined"!=typeof t&&!t.hasOwnProperty("type")||"full"==t.type)n=e;else if("events"===t.type){n=[];for(var r=0;r<e.items.length;r++){var u={};if(u.start=e.items[r].start.dateTime,u.end=e.items[r].end.dateTime,u.summary=e.items[r].summary,"undefined"!=typeof e.items[r].description&&(u.description=e.items[r].description),"undefined"!=typeof e.items[r].location&&(u.location=e.items[r].location),t.hasOwnProperty("metadata"))for(var o in a)u[o]=e.items[r][o];n.push(u)}}else"detailedEvents"===t.type?n=e.items:console.log("The request of type: "+type+" wasn't valid. Please check for possible syntax errors.")},error:function(e){console.log("The Google Calender API failed to connect.")}}),n}}(jQuery);